
{% if schema.allOf[1].properties.dimensionality['enum'][0] == "dimensionless" %}
  <input type="text" class="form-control" name="{{ id_prefix }}_magnitude" placeholder="{{ schema.title }}" {% if data is not none and "magnitude_in_base_units" in data %}value="{{ data.magnitude_in_base_units }}"{% endif %}>
{% else %}
  <div class="input-group">
    <input type="hidden" name="{{ id_prefix }}_units" value="{% if data is not none %}{{ (data | to_datatype).units }}{% else %}{{ schema.allOf[1].properties.defaultUnits['enum'][0] }}{% endif %}"/>
    <input type="text" class="form-control" name="{{ id_prefix }}_magnitude" placeholder="{{ schema.title }}" {% if data is not none %}value="{{ '%g'| format((data | to_datatype).magnitude) }}"{% endif %}>
    <span class="input-group-addon">{% if data is not none %}{{ (data | to_datatype).units }}{% else %}{{ schema.allOf[1].properties.defaultUnits['enum'][0] }}{% endif %}</span>
  </div>
{% endif %}
